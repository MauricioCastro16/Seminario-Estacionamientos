@using estacionamientos.Models.ViewModels
@model UsuariosIndexVM

@{
    ViewData["Title"] = "Usuarios";
}

<h1>Usuarios</h1>

<div class="mb-3">
    <div class="dropdown d-inline-block">
        <button class="btn btn-primary dropdown-toggle" type="button" id="agregarMenu"
                data-bs-toggle="dropdown" aria-expanded="false">
            Agregar usuario
        </button>
        <ul class="dropdown-menu" aria-labelledby="agregarMenu">
            <li>
                <a class="dropdown-item"
                   asp-controller="Usuario" asp-action="CreateDuenio">
                    Dueño
                </a>
            </li>
            <li>
                <a class="dropdown-item"
                   asp-controller="Usuario" asp-action="CreateConductor">
                    Conductor
                </a>
            </li>
            <li>
                <a class="dropdown-item"
                   asp-controller="Usuario" asp-action="CreateAdministrador">
                    Administrador
                </a>
            </li>
            <li>
                <a class="dropdown-item"
                   asp-controller="Usuario" asp-action="CreatePlayero">
                    Playero
                </a>
            </li>
        </ul>
    </div>
</div>

@if (!Model.Duenios.Any() && 
!Model.Conductores.Any()) 
{ 
    <div class="alert alert-info">No hay usuarios aún.
    </div> 
    } 
    else 
    { 
        <h3 class="mt-4">Dueños (@Model.Duenios.Count)
        </h3> 
        @if (!Model.Duenios.Any()) 
        { 
            <div class="alert alert-secondary">No hay dueños cargados.

            </div> 
            } 
            else 
            { 
                <table class="table table-striped align-middle"> 
                    <thead> 
                        <tr> 
                            <th>Id</th> 
                            <th>Nombre y Apellido</th> 
                            <th>Email</th> 
                            <th>Teléfono</th> 
                            <th>CUIT</th> 
                            <th>Acciones</th> 
                            </tr> 
                            </thead> 
                            <tbody> 
                            @foreach (var d in Model.Duenios) 
                            { 
                                <tr> 
                                    <td>@d.UsuNU</td> 
                                    <td>@d.UsuNyA</td> 
                                    <td>@d.UsuEmail</td> 
                                    <td>@d.UsuNumTel</td> 
                                    <td>@d.DueCuit</td> 
                                    <td> 
                                        
                                        <a asp-controller="Usuario" asp-action="EditDuenio" asp-route-id="@d.UsuNU" class="btn btn-sm btn-outline-secondary me-1" title="Editar"> 
                                            <i class="bi bi-pencil"></i> 
                                        </a> 
                                            
                                        <a asp-controller="Usuario" asp-action="DetailsDuenio" asp-route-id="@d.UsuNU" class="btn btn-sm btn-outline-primary me-1" title="Detalles"> 
                                            <i class="bi bi-eye"></i> 
                                        </a> 
                                                
                                        <a asp-controller="Usuario" asp-action="DeleteDuenio" asp-route-id="@d.UsuNU" class="btn btn-sm btn-outline-secondary" title="Eliminar"> 
                                            <i class="bi bi-trash"></i> 
                                        </a> 

                                    </td> 
                                </tr> 
                            } 
                        </tbody> 
                    </table> 
                }

    <h3 class="mt-4">Conductores (@Model.Conductores.Count)</h3>
    @if (!Model.Conductores.Any())
    {
        <div class="alert alert-secondary">No hay conductores cargados.</div>
    }
    else
    {
        <table class="table table-striped align-middle">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Nombre y Apellido</th>
                    <th>Email</th>
                    <th>Teléfono</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
            @foreach (var c in Model.Conductores)
            {
                <tr>
                    <td>@c.UsuNU</td>
                    <td>@c.UsuNyA</td>
                    <td>@c.UsuEmail</td>
                    <td>@c.UsuNumTel</td>
                    <td>
                        <a asp-controller="Usuario" asp-action="EditConductor" asp-route-id="@c.UsuNU" 
                        class="btn btn-sm btn-outline-secondary me-1" title="Editar">
                        <i class="bi bi-pencil"></i>
                        </a>

                        <a asp-controller="Usuario" asp-action="DetailsConductor" asp-route-id="@c.UsuNU" 
                        class="btn btn-sm btn-outline-primary me-1" title="Detalles">
                        <i class="bi bi-eye"></i>
                        </a>

                        <a asp-controller="Usuario" asp-action="DeleteConductor" asp-route-id="@c.UsuNU" 
                        class="btn btn-sm btn-outline-secondary" title="Eliminar">
                        <i class="bi bi-trash"></i>
                        </a>
                    </td>
                </tr>
            }
            </tbody>
        </table>
    }

    <h3 class="mt-4">Administradores (@Model.Administradores.Count)</h3>
    @if (!Model.Administradores.Any())
    {
        <div class="alert alert-secondary">No hay administradores cargados.</div>
    }
    else
    {
        <table class="table table-striped align-middle">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Nombre y Apellido</th>
                    <th>Email</th>
                    <th>Teléfono</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
            @foreach (var a in Model.Administradores)
            {
                <tr>
                    <td>@a.UsuNU</td>
                    <td>@a.UsuNyA</td>
                    <td>@a.UsuEmail</td>
                    <td>@a.UsuNumTel</td>
                    <td>
                        <a asp-controller="Usuario" asp-action="EditAdministrador" asp-route-id="@a.UsuNU" 
                        class="btn btn-sm btn-outline-secondary me-1" title="Editar">
                        <i class="bi bi-pencil"></i>
                        </a>

                        <a asp-controller="Usuario" asp-action="DetailsAdministrador" asp-route-id="@a.UsuNU" 
                        class="btn btn-sm btn-outline-primary me-1" title="Detalles">
                        <i class="bi bi-eye"></i>
                        </a>

                        <a asp-controller="Usuario" asp-action="DeleteAdministrador" asp-route-id="@a.UsuNU" 
                        class="btn btn-sm btn-outline-secondary" title="Eliminar">
                        <i class="bi bi-trash"></i>
                        </a>
                    </td>
                </tr>
            }
            </tbody>
        </table>
    }

    <h3 class="mt-4">Playeros (@Model.Playeros.Count)</h3>
    @if (!Model.Playeros.Any())
    {
        <div class="alert alert-secondary">No hay playeros cargados.</div>
    }
    else
    {
        <table class="table table-striped align-middle">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Nombre y Apellido</th>
                    <th>Email</th>
                    <th>Teléfono</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
            @foreach (var p in Model.Playeros)
            {
                <tr>
                    <td>@p.UsuNU</td>
                    <td>@p.UsuNyA</td>
                    <td>@p.UsuEmail</td>
                    <td>@p.UsuNumTel</td>
                    <td>
                    <td>
                        <a asp-controller="Usuario" asp-action="EditPlayero" asp-route-id="@p.UsuNU" 
                        class="btn btn-sm btn-outline-secondary me-1" title="Editar">
                        <i class="bi bi-pencil"></i>
                        </a>

                        <a asp-controller="Usuario" asp-action="DetailsPlayero" asp-route-id="@p.UsuNU" 
                        class="btn btn-sm btn-outline-primary me-1" title="Detalles">
                        <i class="bi bi-eye"></i>
                        </a>

                        <a asp-controller="Usuario" asp-action="DeletePlayero" asp-route-id="@p.UsuNU" 
                        class="btn btn-sm btn-outline-secondary" title="Eliminar">
                        <i class="bi bi-trash"></i>
                        </a>
                    </td>
                </tr>
            }
            </tbody>
        </table>
    }
}
